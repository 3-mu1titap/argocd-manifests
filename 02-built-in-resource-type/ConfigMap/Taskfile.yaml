version: "3"

env:
  BORDER: double
  BORDER_FOREGROUND: "212"
  PADDING: "1 1"
  MARGIN: "1 1"
  NAMESPACE: 04--configmap

tasks:
  01-create-namespace:
    desc: "default ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±"
    cmds:
      - kubectl apply -f Namespace.yaml
      - kubens ${NAMESPACE}

  02-apply-file-like:
    desc: "í‚¤ ê°’ì´ íŒŒì¼ í˜•ì‹ì¸ ConfigMap ìƒì„±"
    cmds:
      - kubectl apply -f ConfigMap.file-like-keys.yaml

  03-apply-property-like:
    desc: "í‚¤ ê°’ì´ í”„ë¡œí¼í‹° í˜•ì‹ì¸ ConfigMap ìƒì„±"
    cmds:
      - kubectl apply -f ConfigMap.property-like-keys.yaml

  04-apply-pod:
    desc: "Apply the ConfigMap with property like keys"
    dsec: "ConfigMapì„ ì‚¬ìš©í•˜ëŠ” Pod ìƒì„±"
    cmds:
      - kubectl apply -f Pod.configmap-example.yaml

  05-exec-cat-config:
    desc: "ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ /etc/config/conf.yaml íŒŒì¼ í™•ì¸"
    cmds:
      - kubectl exec configmap-example -c nginx -- cat /etc/config/conf.yml

  06-exec-printenv:
    desc: "ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ í™˜ê²½ ë³€ìˆ˜ í™•ì¸"
    cmds:
      - kubectl exec configmap-example -c nginx -- printenv

  07-delete-namespace:
    desc: "ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ"
    cmds:
      - cmd: gum style "ğŸš¨ Deleting the namespace recursively deletes the resources inside of it! ğŸš¨ "
        silent: true
      - kubectl delete -f Namespace.yaml
